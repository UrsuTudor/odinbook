<%= turbo_frame_tag 'users' do %>
  <h1>Logged in as: <%= current_user.name %> </h1> 

<h3> Followers: </h3>
<% current_user.followers.each do |f| %>
  <%= f.name%> <br>
<% end %>

<% if received_follow_requests.any? %>
  <h3>You have some follow requests pending:</h3>
<% end %>

  <% received_follow_requests.each do |req| %>
    <%= req.sender.name %>

    <%= follow_request_decision_form(accept_follow_request_user_path(req.sender.id), req, "Accept", "click->follow-buttons#change_accept_button") %>
    <%= follow_request_decision_form(reject_follow_request_user_path(req.sender.id), req, "Delete", "click->follow-buttons#change_reject_button") %>
    <br>
  <%end%>

<h3>People:</h3>
  <% users.each do |user| %>
    <%= form_with(url: follow_requests_path, method: :post) do |f| %>
      <%= f.hidden_field :recipient_id, value: user.id %>
      <%= user.name %>
      <% unless sent_follow_requests.include?(user.id) %>
          <%= f.submit 'Send Follow Request', data: { controller: "follow-buttons", action: "click->follow-buttons#change_request_button", "follow-buttons-target": "button" } %>
      <% end %>

      <% if current_user.followees.include?(user)%>
        <%= f.submit 'Following', disabled: true %>
      <% end %>
      <br>
    <% end %>
  <% end %>
<% end %>

<br>

<%= button_to 'Log out', destroy_user_session_path, method: :delete %>  

Can send follow requests. Now: <br>
- let users unfollow other users <br>
- after creating posts, make the posts of followed users visible 
